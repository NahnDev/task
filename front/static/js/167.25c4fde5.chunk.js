"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[167],{7282:function(e,n,a){a.d(n,{Z:function(){return y}});var t=a(5861),s=a(9439),c=a(7757),r=a.n(c),l=a(1697),i=a(6106),o=a(914),u=a(2385),d=a(135),m=a(2791),f=a(6030),h=a(3053),x=a(6589),p=a(3490),v=a(8880),j=a(7734),b=a(5516),Z=a(184);var k=function(e){var n=e.user.name;return(0,Z.jsxs)(i.Z,{align:"middle",children:[(0,Z.jsx)(o.Z,{className:"".concat(e.className,"--name"),children:(0,Z.jsx)("span",{children:e.user.name})}),(0,Z.jsx)(u.Z,{overlay:e.menuUser,placement:"bottomRight",arrow:!0,className:"".concat(e.className,"--avatar"),children:(0,Z.jsx)(j.C,{style:{backgroundColor:(0,b.Q)(e.user._id)},children:null===n||void 0===n?void 0:n.slice((null===n||void 0===n?void 0:n.indexOf(" "))+1,(null===n||void 0===n?void 0:n.indexOf(" "))+2)})})]})},N=a(7295),g=a(3504),w=a(4432).nI.header,_=p.bf.header;var y=function(e){var n=(0,f.v9)((function(e){return e.user})),a=(0,f.I0)(),c=(0,m.useState)(e.dropdown),p=(0,s.Z)(c,2),j=p[0],b=p[1],y=(0,Z.jsx)(l.Z,{onClick:function(n){e.actionDropdown&&e.actionDropdown(n.key)},children:w.menuDropdown.map((function(e){return(0,Z.jsxs)(l.Z.Item,{children:[(0,Z.jsx)(e.icon,{})," ",e.text]},e.key)}))}),C=(0,Z.jsx)(l.Z,{onClick:function(e){return D(e.key)},children:w.menuUser.map((function(e){return(0,Z.jsxs)(l.Z.Item,{children:[(0,Z.jsx)(e.icon,{})," ",e.text]},e.key)}))}),S=function(){var e=(0,t.Z)(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Z.getUserDetail(n);case 3:t=e.sent,a((0,x.av)(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),D=function(e){switch(e){case"profile":default:break;case"logout":a((0,x.ix)({isLogin:!1,_id:""}))}};return(0,m.useEffect)((function(){S(n._id),b(e.dropdown)}),[void 0!==n.name,e.dropdown]),(0,Z.jsxs)(i.Z,{align:"middle",justify:"space-between",className:"".concat(_," ").concat(e.className),children:[(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(i.Z,{children:e.dropdown?(0,Z.jsxs)("span",{className:"".concat(_,"__title"),children:[(0,Z.jsx)(u.Z,{overlay:y,placement:"bottomLeft",arrow:!0,children:(0,Z.jsx)("button",{className:"".concat(_,"__title--icon"),children:(0,Z.jsx)(N.Z,{})})}),(0,Z.jsx)(d.Z,{className:"".concat(_,"__title--input"),bordered:!1,value:j,onChange:function(e){return b(e.target.value)},onBlur:function(){e.changeNameProject&&e.changeNameProject(j||e.dropdown)}})]}):(0,Z.jsx)("span",{className:"".concat(_,"__title"),children:e.title})}),e.navigate&&e.navigate.length&&(0,Z.jsx)(i.Z,{className:"".concat(_,"__navigate"),children:e.navigate.map((function(e,n){return(0,Z.jsx)(o.Z,{children:(0,Z.jsx)(g.OL,{to:e.path,className:function(e){var n=e.isActive;return"".concat(_,n?"__navigate--link active":"__navigate--link")},children:e.text})},"header-navigate-".concat(n," "))}))})]}),(0,Z.jsx)(o.Z,{children:(0,Z.jsxs)(i.Z,{align:"middle",children:[(0,Z.jsx)(o.Z,{className:"".concat(_,"__search"),children:(0,Z.jsx)(v.Z,{onSearch:function(e){return console.log(e)}})}),(0,Z.jsx)(o.Z,{children:(0,Z.jsx)(k,{menuUser:C,user:n,className:"".concat(_,"__detail")})})]})})]})}},4167:function(e,n,a){a.r(n),a.d(n,{default:function(){return we}});var t=a(1413),s=a(7762),c=a(5861),r=a(9439),l=a(7757),i=a.n(l),o=a(6106),u=a(914),d=a(5705),m=a(2426),f=a.n(m),h=a(2791),x=a(6030),p=a(6871),v=a(6442),j=a(9316),b=a(6547),Z=a(5276),k=a(184);var N=function(e){return(0,h.useEffect)((function(){}),[e.visible]),(0,k.jsx)(Z.Z,{title:e.title||!1,placement:"right",width:550,onClose:function(){return e.closeModal()},visible:e.visible,getContainer:!1,closable:!1,children:e.contentDrawer})},g=a(7282),w=a(1829),_=a(3490),y=a(4432),C=a(2729),S=a(5478),D=a(5516),T=a(3053),A=a(8880),R=a(7734),M=y.Pb.formMember;var P=function(e){var n,a=e.className,t=e.value,s=e.type,c=e.handleMember,r=e.projectAuthor;return(0,k.jsxs)(o.Z,{align:"middle",className:"".concat(a,"-item"),children:[(0,k.jsx)(u.Z,{xs:6,className:"".concat(a,"-item--avatar"),children:(0,k.jsx)(R.C,{shape:"square",size:55,style:{backgroundColor:(0,D.Q)(t._id),borderRadius:15},children:null===(n=t.name)||void 0===n?void 0:n.slice(0,1)})}),(0,k.jsxs)(u.Z,{xs:16,className:"".concat(a,"-item--desc"),children:[(0,k.jsx)("span",{children:t.name}),(0,k.jsx)("span",{children:t.email})]}),r!==t._id&&(0,k.jsx)(u.Z,{xs:2,children:(0,k.jsx)("button",{onClick:function(){return c(t._id,s)},className:"".concat(a,"-btn"),children:"add"===s?(0,k.jsx)(M.btnSubmit,{}):(0,k.jsx)(M.btnDelete,{})})})]})},E=(y.Pb.formMember,_.zA.member);var I=function(e){var n=(0,x.I0)(),a=(0,x.v9)((function(e){return e.project})),l=(0,x.v9)((function(e){return e.user})),d=(0,h.useState)(),m=(0,r.Z)(d,2),f=m[0],p=m[1],Z=function(){var e=(0,c.Z)(i().mark((function e(n){var c,r,l,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.Z.getUser(n);case 3:if(0===(c=e.sent).length)(0,D.I)("warning","Can't find user!","");else{r=[],l=(0,s.Z)(c);try{for(u=function(){var e=o.value,n=a.members.filter((function(n){return n.user._id===e._id}));r.push((0,t.Z)((0,t.Z)({},e),{},{visible:0===n.length}))},l.s();!(o=l.n()).done;)u()}catch(i){l.e(i)}finally{l.f()}p(r)}e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=(0,c.Z)(i().mark((function e(a,t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.postMembers(a,t);case 3:s=e.sent,n((0,j.fZ)(s)),n((0,b.YR)({_pid:a,value:s})),p([]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,a){return e.apply(this,arguments)}}(),g=function(){var e=(0,c.Z)(i().mark((function e(a,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.deleteMembers(a,t);case 3:e.sent,n((0,j.EP)(t)),n((0,b.sC)({_pid:a,value:t})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a){return e.apply(this,arguments)}}(),w=function(e,n){if("delete"===n)g(a._id,e);else{var t={user:e};N(a._id,t)}};return(0,k.jsxs)(o.Z,{children:[(0,k.jsxs)(u.Z,{xs:12,className:"".concat(E,"-search"),children:[(0,k.jsx)(A.Z,{onSearch:function(e){e&&Z(e)}}),(0,k.jsx)(o.Z,{children:(0,k.jsx)(u.Z,{xs:24,className:"".concat(E,"-list"),children:f&&f.length>0&&f.map((function(e,n){if(l._id!==e._id&&e.visible)return(0,k.jsx)(P,{projectAuthor:a.author,className:"".concat(E),value:e,type:"add",handleMember:w},"member-project-".concat(n))}))})})]}),(0,k.jsx)(u.Z,{xs:12,className:"".concat(E,"-list"),children:a.members.map((function(e,n){if(l._id!==e.user._id)return(0,k.jsx)(P,{projectAuthor:a.author,className:"".concat(E),value:e.user,type:"delete",handleMember:w},"member-project-".concat(n))}))})]})},z=a(135);var Y=function(e){return(0,k.jsxs)(o.Z,{justify:"center",align:"middle",className:"".concat(e.className),children:[e.label&&(0,k.jsx)("label",{htmlFor:e.name,className:"".concat(e.className,"--label"),children:e.label}),(0,k.jsx)(z.Z,{name:e.name,className:"".concat(e.className,"--input"),placeholder:e.placeholder,bordered:!1,value:e.value.name,onChange:function(n){return e.onChange(n.target.value)}})]})},F=a(7528);var O=function(e){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.Z,{className:"".concat(e.className,"--title"),children:(0,k.jsx)("span",{children:"Roles"})}),(0,k.jsx)(o.Z,{className:"".concat(e.className),children:(0,k.jsx)(u.Z,{xs:24,children:e.roles.map((function(n,a){if(!n.default)return(0,k.jsxs)(o.Z,{justify:"space-between",align:"middle",className:"".concat(e.className,"--item"),children:[(0,k.jsxs)("div",{className:"".concat(e.className,"--name"),children:[(0,k.jsx)("span",{children:n.name}),(0,k.jsx)("div",{children:8===n.permission.length?(0,k.jsx)(F.Z,{color:"lime",children:"ALL"},"tag-all"):n.permission.map((function(e,n){return(0,k.jsx)(F.Z,{color:"lime",style:{marginRight:3,marginBottom:3,fontSize:"0.6rem"},children:e},"tag-".concat(n))}))})]}),!n.default&&(0,k.jsx)("button",{className:"".concat(e.className,"--btn"),onClick:function(){return e.handleDelete(n)},children:(0,k.jsx)(e.icon,{})})]},"role-".concat(a))}))})})]})},U=a(3281),V=U.Z.Option;var B=function(e){return(0,k.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,k.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,k.jsx)(U.Z,{mode:"tags",bordered:!1,className:"".concat(e.className,"--input"),value:e.value.permission,onChange:function(n){return e.onChange(n)},tagRender:function(e){var n=e.label,a=e.value,t=e.closable,s=e.onClose;return(0,k.jsx)(F.Z,{color:(0,D.Q)(a),closable:t,onClose:s,style:{marginRight:3},children:n})},children:e.options.map((function(e){return(0,k.jsx)(V,{value:e._id,children:e.name},e._id)}))})]})},Q=y.Pb.formRoles,L=_.zA.roles;var H=function(e){var n=(0,p.UO)(),a=(0,h.useState)({name:"",permission:[]}),s=(0,r.Z)(a,2),l=s[0],d=s[1],m=(0,h.useState)([]),f=(0,r.Z)(m,2),x=f[0],j=f[1],b=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getRoles(n);case 3:a=e.sent,j(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),Z=function(){var e=(0,c.Z)(i().mark((function e(n,a){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.postRoles(n,a);case 3:t=e.sent,console.log(t),t&&(b(n),d({name:"",permission:[]}),(0,D.I)("success","Add role successfully!","")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a){return e.apply(this,arguments)}}(),N=function(){var e=(0,c.Z)(i().mark((function e(n,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.deleteRoles(n,a);case 3:e.sent,b(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,a){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){b(n.id)}),[n]),(0,k.jsxs)(o.Z,{children:[(0,k.jsxs)(u.Z,{xs:24,children:[(0,k.jsx)(Y,{className:"".concat(L,"-field"),name:"name",label:"Name Role *",value:l,onChange:function(e){return d((0,t.Z)((0,t.Z)({},l),{},{name:e}))}}),(0,k.jsx)(B,{options:Q.optionsPermission,className:"".concat(L,"-field"),label:"Permission",value:l,onChange:function(e){return d((0,t.Z)((0,t.Z)({},l),{},{permission:e}))}}),(0,k.jsx)(o.Z,{align:"middle",justify:"center",onClick:function(){return Z(n.id,l)},children:(0,k.jsx)("button",{type:"submit",className:"".concat(L,"-btn"),children:Q.btnSubmit})})]}),(0,k.jsx)(u.Z,{xs:24,children:(0,k.jsx)(O,{className:"".concat(L,"-list"),roles:x,icon:Q.iconDeleteRole,handleDelete:function(e){N(e.project||"",e._id||"")}})})]})};var q=function(e){var n,a=e.className,t=e.value;return(0,k.jsxs)(o.Z,{align:"middle",className:"".concat(a,"-item"),children:[(0,k.jsx)(u.Z,{xs:6,className:"".concat(a,"-item--avatar"),children:(0,k.jsx)(R.C,{shape:"square",size:55,style:{backgroundColor:(0,D.Q)(t._id),borderRadius:15},children:null===(n=t.name)||void 0===n?void 0:n.slice(0,1)})}),(0,k.jsxs)(u.Z,{xs:18,className:"".concat(a,"-item--desc"),children:[(0,k.jsx)("span",{children:t.name}),(0,k.jsx)("span",{children:t.email})]})]})},J=U.Z.Option;var K=function(e){return(0,k.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,k.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,k.jsx)(U.Z,{defaultValue:e.value?e.value._id:"",bordered:!1,className:"".concat(e.className,"--input"),onChange:function(n){return e.onChange(n)},children:e.options.map((function(e){if(!e.default)return(0,k.jsx)(J,{value:e._id,children:e.name},e._id)}))})]})},G=_.zA.setRoles;var W=function(e){var n=(0,p.UO)(),a=(0,x.v9)((function(e){return e.project})),t=(0,h.useState)([]),s=(0,r.Z)(t,2),l=s[0],d=s[1],m=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getRoles(n);case 3:a=e.sent,d(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)(i().mark((function e(n,a,t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.patchMembers(n,a,t);case 3:s=e.sent,console.log(s),m(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a,t){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){m(n.id)}),[n]),(0,k.jsx)(o.Z,{children:(0,k.jsx)(u.Z,{xs:24,className:"".concat(G),children:a&&a.members.map((function(e,n){if(a.author!==e.user._id)return(0,k.jsxs)(o.Z,{align:"middle",className:"".concat(G,"-item"),children:[(0,k.jsx)(q,{value:e.user,className:"".concat(G,"--member")}),(0,k.jsx)(K,{options:l,className:"".concat(G,"--field"),label:"Role",value:e.role,onChange:function(n){return function(e,n){f(a._id,n,{role:e})}(n,e.user._id)}})]},"member-role-".concat(n))}))})})},X=a(9418),$=a(8646),ee=a(2669);var ne=function(e){var n=e.field,a=e.form,t=e.label,s=e.className,c=n.name,r=n.value,l=a.setFieldValue,i=f()(r),o=a.touched[n.name],u=a.errors[n.name],d=u,m=u&&o;return(0,k.jsxs)($.Z.Item,{help:!(!d&&!m)&&u,validateStatus:d||m?"error":"",children:[t&&(0,k.jsx)("label",{htmlFor:c,className:"".concat(s,"-label"),children:t}),(0,k.jsx)(ee.Z,{allowClear:!1,id:c,className:"".concat(s,"-input-field"),defaultValue:i||f()(),value:r||f()(),format:"DD/MM/YYYY",onChange:function(e){return l(c,e)},bordered:!1})]})},ae=a(9474),te=U.Z.Option;var se=function(e){var n=e.field,a=e.form,s=e.options,c=e.label,r=(e.disabled,e.className),l=n.name,i=a.touched[n.name],o=a.errors[n.name],u=o,d=o&&i;return(0,k.jsxs)($.Z.Item,{help:!(!u&&!d)&&o,validateStatus:u||d?"error":"",children:[c&&(0,k.jsx)("label",{htmlFor:l,className:"".concat(r,"-label"),children:c}),(0,k.jsx)(U.Z,(0,t.Z)((0,t.Z)({mode:"tags",id:l},n),{},{bordered:!1,className:"".concat(r,"-input-field"),defaultValue:[],onChange:function(e){var a={target:{name:l,value:e}};n.onChange(a)},tagRender:function(e){var n=e.label,a=e.value,t=e.closable,s=e.onClose;return(0,k.jsx)(F.Z,{color:(0,D.Q)(a),closable:t,onClose:s,style:{marginRight:3},children:n})},children:s.map((function(e){return(0,k.jsx)(te,{value:e._id,children:e.user.name},e._id)}))}))]})},ce=y.Pb.formTask;var re=function(e){var n=(0,x.v9)((function(e){return e.project}));return(0,k.jsxs)(d.l0,{onSubmit:e.handleSubmit,children:[(0,k.jsx)(d.Rt,{component:ae.Z,name:ce.fieldsName.name,type:ce.fieldsName.type,className:"".concat(_.zA.form,"--field"),label:ce.fieldsName.label}),(0,k.jsxs)(o.Z,{children:[(0,k.jsx)(u.Z,{xs:12,children:(0,k.jsx)(d.Rt,{component:ne,name:ce.fieldsExpires.name,className:"".concat(_.zA.form,"--field"),label:ce.fieldsExpires.label})}),(0,k.jsx)(u.Z,{xs:12,children:(0,k.jsx)(d.Rt,{component:se,name:ce.fieldsUser.name,className:"".concat(_.zA.form,"--field"),label:ce.fieldsUser.label,options:n.members})})]}),(0,k.jsx)(X.Z,{content:ce.btnSubmit,type:"submit",className:"".concat(_.zA.form,"--btn")})]})};var le=function(e){var n=(0,h.useState)(f()(e.task.expires)),a=(0,r.Z)(n,2),t=a[0],s=a[1];return(0,h.useEffect)((function(){s(e.task.expires)}),[e.task]),(0,k.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,k.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,k.jsx)(ee.Z,{allowClear:!1,className:"".concat(e.className,"--input"),defaultValue:f()(e.task.expires),value:f()(t),format:"DD/MM/YYYY",onChange:function(e){return s(e)},onBlur:function(){return e.changeExpires(t,"expires")}})]})},ie=y.Pb.tasks;var oe=function(e){var n=(0,h.useState)(e.task.name),a=(0,r.Z)(n,2),t=a[0],s=a[1];return(0,h.useEffect)((function(){s(e.task.name)}),[e.task]),(0,k.jsxs)(o.Z,{justify:"center",align:"middle",className:"".concat(e.className),children:[(0,k.jsx)("span",{className:"".concat(e.className,"--icon"),children:(0,k.jsx)(e.icon,{})}),(0,k.jsx)(z.Z,{name:e.task.name,className:"".concat(e.className,"--input"),defaultValue:e.task.name,value:t,onChange:function(e){return s(e.target.value)},onBlur:function(){return e.changeName(t,"name")},bordered:!1}),(0,k.jsx)("span",{className:"".concat(e.className,"--icon-delete"),onClick:function(){return e.handleTask(e.task._id,"delete-task")},children:(0,k.jsx)(ie.iconDeleteTask,{})})]})},ue=U.Z.Option;var de=function(e){var n=(0,p.UO)(),a=(0,h.useState)([]),t=(0,r.Z)(a,2),s=t[0],l=t[1],u=(0,h.useState)(e.task.assignee),d=(0,r.Z)(u,2),m=d[0],f=d[1],x=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getMembers(n);case 3:a=e.sent,l(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){x(n.id),f(e.task.assignee)}),[e.task]),(0,k.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,k.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,k.jsx)(U.Z,{mode:"tags",bordered:!1,className:"".concat(e.className,"--input"),value:m,onChange:function(n){f(n),e.changeAssignee(n[n.length-1],"assignee","add")},tagRender:function(n){var a=n.label,t=n.value,s=n.closable,c=n.onClose;return(0,k.jsx)(F.Z,{color:(0,D.Q)(t),closable:s,onClose:function(){c(),e.changeAssignee(t,"assignee","delete")},style:{marginRight:3},children:a})},children:s.map((function(e){return(0,k.jsx)(ue,{value:e._id,children:e.user.name},e._id)}))})]})},me=y.Pb.formSubTask;var fe=function(e){return(0,k.jsxs)(d.l0,{onSubmit:e.handleSubmit,children:[(0,k.jsx)(d.Rt,{component:ae.Z,name:me.fieldsName.name,type:me.fieldsName.type,className:"".concat(_.zA.form,"--field"),label:me.fieldsName.label}),(0,k.jsx)(X.Z,{content:me.btnSubmit,type:"submit",className:"".concat(_.zA.form,"--btn")})]})},he=y.Pb.tasks.subtask;var xe=function(e){var n,a=(0,h.useState)((0,k.jsx)(k.Fragment,{})),t=(0,r.Z)(a,2),s=t[0],c=t[1],l=(0,h.useState)(!1),i=(0,r.Z)(l,2),m=i[0],f=i[1];return(0,h.useEffect)((function(){var n=(0,k.jsx)(d.J9,{initialValues:C.hF,validationSchema:S.vP,onSubmit:function(n){f(!1),e.handleSubmit(n)},render:fe});c({title:he.title,temp:n})}),[e.task,m]),(0,k.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[(0,k.jsxs)(u.Z,{xs:24,children:[(0,k.jsx)(o.Z,{children:(0,k.jsx)("button",{className:"".concat(e.className,"--btn"),onClick:function(){return f(!0)},children:he.btnAdd})}),(0,k.jsx)("span",{className:"".concat(e.className,"--title"),children:he.title}),(0,k.jsx)(o.Z,{children:(0,k.jsx)(u.Z,{xs:24,className:"".concat(e.className,"--list"),children:null===(n=e.task.subtask_order)||void 0===n?void 0:n.map((function(n,a){return(0,k.jsxs)(o.Z,{align:"middle",justify:"space-between",className:"".concat(e.className,"--item"),children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(e.icon,{})," ",(0,k.jsx)("span",{children:n.name})]}),!n.complete&&(0,k.jsxs)("div",{className:"".concat(e.className,"--icon"),children:[(0,k.jsx)(he.iconCheck,{onClick:function(){return e.handleChangeSubtask(n,"complete")}}),(0,k.jsx)(he.iconCancel,{onClick:function(){return e.handleChangeSubtask(n,"delete")}})]})]},"subtask-".concat(a))}))})})]}),(0,k.jsx)(w.Z,{loading:!1,contentModal:s.temp,visible:m,closeModal:function(e){f(e)},title:s.title})]})},pe=z.Z.TextArea;var ve=function(e){var n=(0,h.useState)(e.task.name),a=(0,r.Z)(n,2),t=a[0],s=a[1];return(0,h.useEffect)((function(){s(e.task.name)}),[e.task]),(0,k.jsxs)(o.Z,{justify:"center",className:"".concat(e.className),children:[e.label&&(0,k.jsx)("label",{htmlFor:e.name,className:"".concat(e.className,"--label"),children:e.label}),(0,k.jsx)(pe,{rows:4,name:e.task.name,className:"".concat(e.className,"--area"),defaultValue:e.task.name,value:t,onChange:function(e){return s(e.target.value)},onBlur:function(){return e.changeDescription(t,"description")},bordered:!1})]})},je=_.zA.task;var be=function(e){var n=(0,p.UO)(),a=(0,h.useState)(e.task),t=(0,r.Z)(a,2),s=t[0],l=t[1],d=function(){var e=(0,c.Z)(i().mark((function e(n,a){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getTasksDetail(n,a);case 3:t=e.sent,l(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,a){return e.apply(this,arguments)}}(),m=function(){var n=(0,c.Z)(i().mark((function n(a,t,s){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.patchTasks(a,t,s);case 3:n.sent&&(e.changeTask(),d(a,t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,t){return n.apply(this,arguments)}}(),x=function(){var n=(0,c.Z)(i().mark((function n(a,t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.deleteTasks(a,t);case 3:n.sent,e.changeTask(),e.setVisibleDrawer(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e,a){return n.apply(this,arguments)}}(),j=function(){var n=(0,c.Z)(i().mark((function n(a,t,c){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"complete"!==c){n.next=8;break}return n.next=4,v.Z.patchTasksComplete(a,t);case 4:n.sent,(0,D.I)("success","Task complete!",""),n.next=12;break;case 8:return n.next=10,v.Z.deleteTasks(a,t);case 10:n.sent,(0,D.I)("success","Delete Task successfully!","");case 12:e.changeTask(),d(a,s._id||""),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),console.log(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,a,t){return n.apply(this,arguments)}}(),b=function(){var n=(0,c.Z)(i().mark((function n(a,t,s){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.postSubtasks(a,t,s);case 3:n.sent&&(e.changeTask(),d(a,t),(0,D.I)("success","Create Subtask successfully!","")),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,t){return n.apply(this,arguments)}}(),Z=function(){var n=(0,c.Z)(i().mark((function n(a,t,s){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.postAssigneeTasks(a,t,s);case 3:n.sent&&(e.changeTask(),d(a,t)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,t){return n.apply(this,arguments)}}(),N=function(){var e=(0,c.Z)(i().mark((function e(n,a,t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.deleteAssigneeTasks(n,a,t);case 3:s=e.sent,l(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,a,t){return e.apply(this,arguments)}}(),g=function(a,t,s){var c=e.task._id||"";if(a){var r={};switch(t){case"name":r.name=a,m(n.id,c,r);break;case"assignee":"delete"===s?N(n.id,c,a):Z(n.id,c,{member:a});break;case"expires":r.expires=Number(f()(a).utc().format("x")),m(n.id,c,r);break;case"delete-task":x(n.id,a)}}};return(0,h.useEffect)((function(){l(e.task)}),[e.task]),(0,k.jsx)(o.Z,{children:(0,k.jsxs)(u.Z,{xs:24,children:[(0,k.jsx)(oe,{className:"".concat(je,"-header"),icon:e.icon,task:s,changeName:g,handleTask:g}),(0,k.jsx)(de,{className:"".concat(je,"-field"),task:s,label:"Assignee",changeAssignee:g}),(0,k.jsx)(le,{className:"".concat(je,"-field"),task:s,label:"Due date",name:"expires",changeExpires:g}),(0,k.jsx)(ve,{className:"".concat(je,"-field"),task:s,label:"Description",name:"expires",changeDescription:function(e){return console.log(e)}}),(0,k.jsx)(xe,{className:"".concat(je,"-subtask"),task:s,icon:e.icon,handleSubmit:function(a){var t=e.task._id||"";b(n.id,t,a)},handleChangeSubtask:function(e,a){j(n.id,e._id,a)}})]})})},Ze=y.Pb.tasks;var ke=function(e){return(0,k.jsx)("div",{className:"".concat(e.className),children:(0,k.jsx)(o.Z,{justify:"center",children:(0,k.jsxs)(u.Z,{xs:24,children:[(0,k.jsx)(o.Z,{className:"".concat(e.className,"--title"),children:(0,k.jsx)("span",{children:e.title})}),(0,k.jsx)(o.Z,{className:"".concat(e.className,"--tasks"),children:(0,k.jsxs)(u.Z,{xs:24,children:[e.tasks.length>0&&e.tasks.map((function(n,a){if(n.status===e.filter)return(0,k.jsx)(o.Z,{className:"".concat(e.className,"--task"),onClick:function(){return e.handleTask(n,e.icon)},children:(0,k.jsxs)(u.Z,{xs:24,children:[(0,k.jsxs)(o.Z,{justify:"space-between",align:"middle",children:[(0,k.jsxs)(u.Z,{xs:20,className:"".concat(e.className,"--task-name"),children:[(0,k.jsx)(e.icon,{})," ",(0,k.jsx)("span",{children:n.name})]}),(0,k.jsx)("span",{className:"".concat(e.className,"--task-icon"),children:(0,k.jsx)(Ze.iconMenuTask,{})})]}),(0,k.jsx)(o.Z,{justify:"space-between",children:(0,k.jsxs)("span",{className:"".concat(e.className,"--task-time"),children:[(0,k.jsx)(Ze.iconDeadline,{})," ",f()(n.expires).format("DD/MM/YYYY")]})})]})},"task-".concat(a))})),(0,k.jsx)(o.Z,{className:"".concat(e.className,"--btn"),children:(0,k.jsx)(u.Z,{xs:24,children:(0,k.jsxs)(o.Z,{align:"middle",onClick:function(){return e.actionDropdown("add-task")},children:[(0,k.jsx)("span",{className:"".concat(e.className,"--btn-icon"),children:(0,k.jsx)(Ze.iconBtnAdd,{})}),(0,k.jsx)("span",{className:"".concat(e.className,"--btn-text"),children:Ze.textBtnAdd})]})})})]})})]})})})},Ne=y.Pb,ge=_.zA.project;var we=function(e){var n=(0,p.UO)(),a=(0,x.I0)(),l=(0,h.useState)(!1),m=(0,r.Z)(l,2),Z=m[0],y=m[1],T=(0,h.useState)(!1),A=(0,r.Z)(T,2),R=A[0],M=A[1],P=(0,h.useState)((0,k.jsx)(k.Fragment,{})),E=(0,r.Z)(P,2),z=E[0],Y=E[1],F=(0,h.useState)((0,k.jsx)(k.Fragment,{})),O=(0,r.Z)(F,2),U=O[0],V=O[1],B=(0,x.v9)((function(e){return e.projects})),Q=(0,x.v9)((function(e){return e.project})),L=(0,h.useState)([]),q=(0,r.Z)(L,2),J=q[0],K=q[1],G=function(){var e=(0,c.Z)(i().mark((function e(n){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getProjectsDetail(n);case 3:t=e.sent,a((0,j.IH)(t)),$(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),X=function(){var e=(0,c.Z)(i().mark((function e(n,t){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.patchProjects(n,{name:t});case 3:s=e.sent,a((0,j.IH)(s)),a((0,b.jo)({_pid:n,value:t})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a){return e.apply(this,arguments)}}(),$=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getTasks(n);case 3:a=e.sent,K(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,c.Z)(i().mark((function e(n,a){var t,c,r,l,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={name:a.name},e.next=4,v.Z.postTasks(n,t);case 4:if(c=e.sent,r=c._id||"",!a.assignee||!c){e.next=26;break}l=(0,s.Z)(a.assignee),e.prev=8,l.s();case 10:if((o=l.n()).done){e.next=17;break}return u=o.value,e.next=14,v.Z.postAssigneeTasks(n,r,{member:u});case 14:e.sent;case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),l.e(e.t0);case 22:return e.prev=22,l.f(),e.finish(22);case 25:delete a.assignee;case 26:if(!a||!c){e.next=32;break}return a.expires=Number(f()(a.expires).utc().format("x")),e.next=30,v.Z.patchTasks(n,r,a);case 30:e.sent&&(y(!1),G(n),(0,D.I)("success","Create Task successfully!",""));case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),console.log(e.t1);case 37:case"end":return e.stop()}}),e,null,[[0,34],[8,19,22,25]])})));return function(n,a){return e.apply(this,arguments)}}(),ne=function(e,n){var a=(0,k.jsx)(k.Fragment,{}),s="";switch(y(!0),e){case"add-task":a=(0,k.jsx)(d.J9,{initialValues:C.pN,validationSchema:S.vP,onSubmit:function(a){return function(e,n,a){"add-task"===n&&ee(Q._id,(0,t.Z)((0,t.Z)({},e),{},{status:a}))}(a,e,n)},render:re}),s="Add Task";break;case"add-member":a=(0,k.jsx)(I,{}),s="Members";break;case"add-roles":a=(0,k.jsx)(H,{}),s="Roles";break;case"set-role":a=(0,k.jsx)(W,{}),s="Set Role for Members"}Y({temp:a,title:s})},ae=function(e,a){M(!0),V((0,k.jsx)(be,{task:e,icon:a,changeTask:function(){$(n.id)},memberProject:Q.members,setVisibleDrawer:function(){return M(!1)}}))};return(0,h.useEffect)((function(){B&&B.length>0?B.forEach((function(e){e._id===n.id&&($(e._id),a((0,j.IH)(e)))})):G(n.id)}),[n]),(0,h.useEffect)((function(){Z||Y({temp:(0,k.jsx)(k.Fragment,{}),title:""})}),[Z]),(0,k.jsx)(o.Z,{className:"".concat(e.className," ").concat(ge),children:(0,k.jsxs)(u.Z,{xs:24,children:[(0,k.jsx)(g.Z,{className:_.KN.header,dropdown:Q.name,actionDropdown:ne,changeNameProject:function(e){return X(Q._id,e)}}),(0,k.jsx)("div",{className:"".concat(ge,"__list"),children:(0,k.jsx)("div",{className:"".concat(ge,"__list--scroll"),children:Ne.tasks.filter.map((function(e,n){return(0,k.jsx)(ke,{actionDropdown:function(n){return ne(n,e.value)},className:"".concat(ge,"__list-tasks"),title:e.title,tasks:J,filter:e.value,icon:e.icon,handleTask:ae},"tasks-".concat(n))}))})}),(0,k.jsx)(w.Z,{loading:!1,contentModal:z.temp,visible:Z,closeModal:function(e){y(e)},title:z.title}),(0,k.jsx)(N,{visible:R,closeModal:function(){return M(!1)},contentDrawer:U})]})})}}}]);
//# sourceMappingURL=167.25c4fde5.chunk.js.map