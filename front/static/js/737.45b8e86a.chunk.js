"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[737],{3053:function(e,n,a){var s=a(8039),t={getUser:function(e){var n="/user?search=".concat(e);return s.Z.get(n)},getUserDetail:function(e){var n="/user/".concat(e);return s.Z.get(n)},postUser:function(e){return s.Z.post("/user",e)},patchUser:function(e,n){var a="/user/".concat(e);return s.Z.patch(a,n)},deleteUser:function(e){var n="/user/".concat(e);return s.Z.delete(n)}};n.Z=t},7282:function(e,n,a){a.d(n,{Z:function(){return _}});var s=a(5861),t=a(7757),c=a.n(t),r=a(1697),l=a(6106),i=a(914),o=a(2385),u=a(2791),d=a(6030),m=a(3053),f=a(6589),h=a(3490),x=a(8880),p=a(7734),v=a(9286),j=a(5516),b=a(184),Z=(0,b.jsxs)(r.Z,{children:[(0,b.jsx)(r.Z.Item,{children:(0,b.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.antgroup.com",children:"1st menu item"})}),(0,b.jsx)(r.Z.Item,{children:(0,b.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.aliyun.com",children:"2nd menu item"})}),(0,b.jsx)(r.Z.Item,{children:(0,b.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.luohanacademy.com",children:"3rd menu item"})})]});var k=function(e){var n=e.user.name;return(0,b.jsxs)(l.Z,{align:"middle",children:[(0,b.jsx)(o.Z,{overlay:Z,placement:"bottomRight",arrow:!0,children:(0,b.jsx)("button",{className:"".concat(e.className,"--btn"),children:(0,b.jsx)(v.Z,{})})}),(0,b.jsx)(i.Z,{className:"".concat(e.className,"--name"),children:(0,b.jsx)("span",{children:e.user.name})}),(0,b.jsx)(o.Z,{overlay:Z,placement:"bottomRight",arrow:!0,className:"".concat(e.className,"--avatar"),children:(0,b.jsx)(p.C,{style:{backgroundColor:(0,j.Q)(e.user._id)},children:null===n||void 0===n?void 0:n.slice((null===n||void 0===n?void 0:n.indexOf(" "))+1,(null===n||void 0===n?void 0:n.indexOf(" "))+2)})})]})},g=a(7295),N=a(3504),w=a(4232).nI.header,y=(r.Z,r.Z.Item,r.Z.Item,r.Z.Item,h.bf.header);var _=function(e){var n=(0,d.v9)((function(e){return e.user})),a=(0,d.I0)(),t=(0,b.jsx)(r.Z,{onClick:function(n){e.actionDropdown&&e.actionDropdown(n.key)},children:w.menuDropdown.map((function(e){return(0,b.jsxs)(r.Z.Item,{children:[(0,b.jsx)(e.icon,{})," ",e.text]},e.key)}))}),h=function(){var e=(0,s.Z)(c().mark((function e(n){var s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.getUserDetail(n);case 3:s=e.sent,a((0,f.av)(s)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){h(n._id)}),[void 0!==n.name]),(0,b.jsxs)(l.Z,{align:"middle",justify:"space-between",className:"".concat(y," ").concat(e.className),children:[(0,b.jsxs)(i.Z,{children:[(0,b.jsx)(l.Z,{children:e.dropdown?(0,b.jsxs)("span",{className:"".concat(y,"__title"),children:[e.dropdown,(0,b.jsx)(o.Z,{overlay:t,placement:"bottomRight",arrow:!0,children:(0,b.jsx)("button",{className:"".concat(y,"__title--icon"),children:(0,b.jsx)(g.Z,{})})})]}):(0,b.jsx)("span",{className:"".concat(y,"__title"),children:e.title})}),e.navigate&&e.navigate.length&&(0,b.jsx)(l.Z,{className:"".concat(y,"__navigate"),children:e.navigate.map((function(e,n){return(0,b.jsx)(i.Z,{children:(0,b.jsx)(N.OL,{to:e.path,className:function(e){var n=e.isActive;return"".concat(y,n?"__navigate--link active":"__navigate--link")},children:e.text})},"header-navigate-".concat(n," "))}))})]}),(0,b.jsx)(i.Z,{children:(0,b.jsxs)(l.Z,{align:"middle",children:[(0,b.jsx)(i.Z,{className:"".concat(y,"__search"),children:(0,b.jsx)(x.Z,{onSearch:function(e){return console.log(e)}})}),(0,b.jsx)(i.Z,{children:(0,b.jsx)(k,{user:n,className:"".concat(y,"__detail")})})]})})]})}},7474:function(e,n,a){a.d(n,{Z:function(){return l}});var s=a(6770),t=a(7083),c=a(2791),r=a(184);var l=function(e){return(0,c.useEffect)((function(){}),[e.visible]),(0,r.jsx)(s.Z,{title:e.title,visible:e.visible,onOk:function(){return e.closeModal(!1)},onCancel:function(){return e.closeModal(!1)},footer:null,width:600,children:(0,r.jsx)(t.Z,{spinning:e.loading,children:e.contentModal})})}},8880:function(e,n,a){a.d(n,{Z:function(){return u}});var s=a(9439),t=a(6106),c=a(1730),r=a(3490),l=a(2791),i=a(184),o=r.bf.search;var u=function(e){var n=(0,l.useState)(""),a=(0,s.Z)(n,2),r=a[0],u=a[1];return(0,i.jsxs)(t.Z,{className:"".concat(o),align:"middle",children:[(0,i.jsx)("span",{className:"".concat(o,"__icon"),children:(0,i.jsx)(c.Z,{})}),(0,i.jsx)("input",{type:"text",placeholder:"Search",className:"".concat(o,"__input"),value:r,onChange:function(e){return u(e.target.value)},onKeyPress:function(n){"Enter"===n.key&&(u(""),e.onSearch(r))},onBlur:function(){u(""),e.onSearch(r)}})]})}},8737:function(e,n,a){a.r(n),a.d(n,{default:function(){return ve}});var s=a(1413),t=a(7762),c=a(5861),r=a(9439),l=a(7757),i=a.n(l),o=a(6106),u=a(914),d=a(5705),m=a(2426),f=a.n(m),h=a(2791),x=a(6030),p=a(6871),v=a(6442),j=a(9316),b=a(5276),Z=a(184);var k=function(e){return(0,h.useEffect)((function(){}),[e.visible]),(0,Z.jsx)(b.Z,{title:e.title||!1,placement:"right",width:550,onClose:function(){return e.closeModal()},visible:e.visible,getContainer:!1,closable:!1,children:e.contentDrawer})},g=a(7282),N=a(7474),w=a(3490),y=a(4232),_=a(2729),C=a(5478),S=a(5516),D=a(7734),T=a(3053),A=a(8880),R=y.Pb.formMember,I=w.zA.member;var M=function(e){var n,a=(0,x.I0)(),s=(0,x.v9)((function(e){return e.project})),t=(0,h.useState)(),l=(0,r.Z)(t,2),d=l[0],m=l[1],f=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.Z.getUser(n);case 3:0===(a=e.sent).length&&(0,S.I)("warning","Can't find user!",""),m(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)(i().mark((function e(n,s){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.postMembers(n,s);case 3:t=e.sent,a((0,j.fZ)(t)),m([]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a){return e.apply(this,arguments)}}();return(0,Z.jsxs)(o.Z,{children:[(0,Z.jsxs)(u.Z,{xs:12,className:"".concat(I,"-search"),children:[(0,Z.jsx)(A.Z,{onSearch:function(e){e&&f(e)}}),d&&d.length>0&&(0,Z.jsxs)(o.Z,{align:"middle",className:"".concat(I,"-item"),children:[(0,Z.jsx)(u.Z,{xs:6,className:"".concat(I,"-item--avatar"),children:(0,Z.jsx)(D.C,{shape:"square",size:55,style:{backgroundColor:(0,S.Q)(d[0]._id),borderRadius:15},children:null===(n=d[0].name)||void 0===n?void 0:n.slice(0,1)})}),(0,Z.jsxs)(u.Z,{xs:16,className:"".concat(I,"-item--desc"),children:[(0,Z.jsx)("span",{children:d[0].name}),(0,Z.jsx)("span",{children:d[0].email})]}),(0,Z.jsx)(u.Z,{xs:2,children:(0,Z.jsx)("button",{onClick:function(){return function(e){var n={user:e};p(s._id,n)}(d[0]._id)},className:"".concat(I,"-btn"),children:(0,Z.jsx)(R.btnSubmit,{})})})]})]}),(0,Z.jsx)(u.Z,{xs:12,className:"".concat(I,"-list"),children:s.members.map((function(e,n){var a;return(0,Z.jsxs)(o.Z,{align:"middle",className:"".concat(I,"-item"),children:[(0,Z.jsx)(u.Z,{xs:6,className:"".concat(I,"-item--avatar"),children:(0,Z.jsx)(D.C,{shape:"square",size:55,style:{backgroundColor:(0,S.Q)(e.user._id),borderRadius:15},children:null===(a=e.user.name)||void 0===a?void 0:a.slice(0,1)})}),(0,Z.jsxs)(u.Z,{xs:16,className:"".concat(I,"-item--desc"),children:[(0,Z.jsx)("span",{children:e.user.name}),(0,Z.jsx)("span",{children:e.user.email})]}),(0,Z.jsx)(u.Z,{xs:2,children:(0,Z.jsx)("button",{className:"".concat(I,"-item--btn"),children:(0,Z.jsx)(R.btnDelete,{})})})]},"member-project-".concat(n))}))})]})},E=a(135);var P=function(e){return(0,Z.jsxs)(o.Z,{justify:"center",align:"middle",className:"".concat(e.className),children:[e.label&&(0,Z.jsx)("label",{htmlFor:e.name,className:"".concat(e.className,"--label"),children:e.label}),(0,Z.jsx)(E.Z,{name:e.name,className:"".concat(e.className,"--input"),placeholder:e.placeholder,bordered:!1,value:e.value.name,onChange:function(n){return e.onChange(n.target.value)}})]})},z=a(7528);var U=function(e){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(o.Z,{className:"".concat(e.className,"--title"),children:(0,Z.jsx)("span",{children:"Roles"})}),(0,Z.jsx)(o.Z,{className:"".concat(e.className),children:(0,Z.jsx)(u.Z,{xs:24,children:e.roles.map((function(n,a){return(0,Z.jsxs)(o.Z,{justify:"space-between",align:"middle",className:"".concat(e.className,"--item"),children:[(0,Z.jsxs)("div",{className:"".concat(e.className,"--name"),children:[(0,Z.jsx)("span",{children:n.name}),(0,Z.jsx)("div",{children:8===n.permission.length?(0,Z.jsx)(z.Z,{color:"lime",children:"ALL"},"tag-all"):n.permission.map((function(e,n){return(0,Z.jsx)(z.Z,{color:"lime",children:e},"tag-".concat(n))}))})]}),!n.default&&(0,Z.jsx)("button",{className:"".concat(e.className,"--btn"),onClick:function(){return e.handleDelete(n)},children:(0,Z.jsx)(e.icon,{})})]},"role-".concat(a))}))})})]})},F=a(3281),Y=F.Z.Option;var O=function(e){return(0,Z.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,Z.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,Z.jsx)(F.Z,{mode:"tags",bordered:!1,className:"".concat(e.className,"--input"),value:e.value.permission,onChange:function(n){return e.onChange(n)},tagRender:function(e){var n=e.label,a=e.value,s=e.closable,t=e.onClose;return(0,Z.jsx)(z.Z,{color:(0,S.Q)(a),closable:s,onClose:t,style:{marginRight:3},children:n})},children:e.options.map((function(e){return(0,Z.jsx)(Y,{value:e._id,children:e.name},e._id)}))})]})},V=y.Pb.formRoles,B=w.zA.roles;var Q=function(e){var n=(0,p.UO)(),a=(0,h.useState)({name:"",permission:[]}),t=(0,r.Z)(a,2),l=t[0],d=t[1],m=(0,h.useState)([]),f=(0,r.Z)(m,2),x=f[0],j=f[1],b=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getRoles(n);case 3:a=e.sent,j(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),k=function(){var e=(0,c.Z)(i().mark((function e(n,a){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.postRoles(n,a);case 3:s=e.sent,console.log(s),s&&(b(n),d({name:"",permission:[]}),(0,S.I)("success","Add role successfully!","")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,a){return e.apply(this,arguments)}}(),g=function(){var e=(0,c.Z)(i().mark((function e(n,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.deleteRoles(n,a);case 3:e.sent,b(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,a){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){b(n.id)}),[n]),(0,Z.jsxs)(o.Z,{children:[(0,Z.jsxs)(u.Z,{xs:24,children:[(0,Z.jsx)(P,{className:"".concat(B,"-field"),name:"name",label:"Name Role *",value:l,onChange:function(e){return d((0,s.Z)((0,s.Z)({},l),{},{name:e}))}}),(0,Z.jsx)(O,{options:V.optionsPermission,className:"".concat(B,"-field"),label:"Permission",value:l,onChange:function(e){return d((0,s.Z)((0,s.Z)({},l),{},{permission:e}))}}),(0,Z.jsx)(o.Z,{align:"middle",justify:"center",onClick:function(){return k(n.id,l)},children:(0,Z.jsx)("button",{type:"submit",className:"".concat(B,"-btn"),children:V.btnSubmit})})]}),(0,Z.jsx)(u.Z,{xs:24,children:(0,Z.jsx)(U,{className:"".concat(B,"-list"),roles:x,icon:V.iconDeleteRole,handleDelete:function(e){g(e.project||"",e._id||"")}})})]})},L=a(9418),q=a(8646),H=a(2669);var J=function(e){var n=e.field,a=e.form,s=e.label,t=e.className,c=n.name,r=n.value,l=a.setFieldValue,i=f()(r),o=a.touched[n.name],u=a.errors[n.name],d=u,m=u&&o;return(0,Z.jsxs)(q.Z.Item,{help:!(!d&&!m)&&u,validateStatus:d||m?"error":"",children:[s&&(0,Z.jsx)("label",{htmlFor:c,className:"".concat(t,"-label"),children:s}),(0,Z.jsx)(H.Z,{allowClear:!1,id:c,className:"".concat(t,"-input-field"),defaultValue:i||f()(),value:r||f()(),format:"DD/MM/YYYY",onChange:function(e){return l(c,e)},bordered:!1})]})},K=a(9474),G=F.Z.Option;var W=function(e){var n=e.field,a=e.form,t=e.options,c=e.label,r=(e.disabled,e.className),l=n.name,i=a.touched[n.name],o=a.errors[n.name],u=o,d=o&&i;return(0,Z.jsxs)(q.Z.Item,{help:!(!u&&!d)&&o,validateStatus:u||d?"error":"",children:[c&&(0,Z.jsx)("label",{htmlFor:l,className:"".concat(r,"-label"),children:c}),(0,Z.jsx)(F.Z,(0,s.Z)((0,s.Z)({mode:"tags",id:l},n),{},{bordered:!1,className:"".concat(r,"-input-field"),defaultValue:[],onChange:function(e){var a={target:{name:l,value:e}};n.onChange(a)},tagRender:function(e){var n=e.label,a=e.value,s=e.closable,t=e.onClose;return(0,Z.jsx)(z.Z,{color:(0,S.Q)(a),closable:s,onClose:t,style:{marginRight:3},children:n})},children:t.map((function(e){return(0,Z.jsx)(G,{value:e._id,children:e.user.name},e._id)}))}))]})},X=y.Pb.formTask;var $=function(e){var n=(0,x.v9)((function(e){return e.project}));return(0,Z.jsxs)(d.l0,{onSubmit:e.handleSubmit,children:[(0,Z.jsx)(d.Rt,{component:K.Z,name:X.fieldsName.name,type:X.fieldsName.type,className:"".concat(w.zA.form,"--field"),label:X.fieldsName.label}),(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(u.Z,{xs:12,children:(0,Z.jsx)(d.Rt,{component:J,name:X.fieldsExpires.name,className:"".concat(w.zA.form,"--field"),label:X.fieldsExpires.label})}),(0,Z.jsx)(u.Z,{xs:12,children:(0,Z.jsx)(d.Rt,{component:W,name:X.fieldsUser.name,className:"".concat(w.zA.form,"--field"),label:X.fieldsUser.label,options:n.members})})]}),(0,Z.jsx)(L.Z,{content:X.btnSubmit,type:"submit",className:"".concat(w.zA.form,"--btn")})]})};var ee=function(e){var n=(0,h.useState)(f()(e.task.expires)),a=(0,r.Z)(n,2),s=a[0],t=a[1];return(0,h.useEffect)((function(){t(e.task.expires)}),[e.task]),(0,Z.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,Z.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,Z.jsx)(H.Z,{allowClear:!1,className:"".concat(e.className,"--input"),defaultValue:f()(e.task.expires),value:f()(s),format:"DD/MM/YYYY",onChange:function(e){return t(e)},onBlur:function(){return e.changeExpires(s,"expires")}})]})},ne=(w.zA.task,y.Pb.tasks);var ae=function(e){var n=(0,h.useState)(e.task.name),a=(0,r.Z)(n,2),s=a[0],t=a[1];return(0,h.useEffect)((function(){t(e.task.name)}),[e.task]),(0,Z.jsxs)(o.Z,{justify:"center",align:"middle",className:"".concat(e.className),children:[(0,Z.jsx)("span",{className:"".concat(e.className,"--icon"),children:(0,Z.jsx)(e.icon,{})}),(0,Z.jsx)(E.Z,{name:e.task.name,className:"".concat(e.className,"--input"),defaultValue:e.task.name,value:s,onChange:function(e){return t(e.target.value)},onBlur:function(){return e.changeName(s,"name")},bordered:!1}),(0,Z.jsx)("span",{className:"".concat(e.className,"--icon"),children:(0,Z.jsx)(ne.iconDeleteTask,{})})]})},se=F.Z.Option;var te=function(e){var n=(0,p.UO)(),a=(0,h.useState)([]),s=(0,r.Z)(a,2),t=s[0],l=s[1],u=(0,h.useState)(e.task.assignee),d=(0,r.Z)(u,2),m=d[0],f=d[1],x=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getMembers(n);case 3:a=e.sent,l(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){x(n.id),f(e.task.assignee)}),[e.task]),(0,Z.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[e.label&&(0,Z.jsx)("label",{className:"".concat(e.className,"--label"),children:e.label}),(0,Z.jsx)(F.Z,{mode:"tags",bordered:!1,className:"".concat(e.className,"--input"),value:m,onChange:function(e){return f(e)},onBlur:function(){return e.changeAssignee(m,"assignee")},tagRender:function(e){var n=e.label,a=e.value,s=e.closable,t=e.onClose;return(0,Z.jsx)(z.Z,{color:(0,S.Q)(a),closable:s,onClose:t,style:{marginRight:3},children:n})},children:t.map((function(e){return(0,Z.jsx)(se,{value:e._id,children:e.user.name},e._id)}))})]})},ce=y.Pb.formSubTask;var re=function(e){return(0,Z.jsxs)(d.l0,{onSubmit:e.handleSubmit,children:[(0,Z.jsx)(d.Rt,{component:K.Z,name:ce.fieldsName.name,type:ce.fieldsName.type,className:"".concat(w.zA.form,"--field"),label:ce.fieldsName.label}),(0,Z.jsx)(L.Z,{content:ce.btnSubmit,type:"submit",className:"".concat(w.zA.form,"--btn")})]})},le=y.Pb.tasks.subtask;var ie=function(e){var n,a=(0,h.useState)((0,Z.jsx)(Z.Fragment,{})),s=(0,r.Z)(a,2),t=s[0],c=s[1],l=(0,h.useState)(!1),i=(0,r.Z)(l,2),m=i[0],f=i[1];return(0,h.useEffect)((function(){var n=(0,Z.jsx)(d.J9,{initialValues:_.hF,validationSchema:C.vP,onSubmit:function(n){f(!1),e.handleSubmit(n)},render:re});c({title:le.title,temp:n})}),[e.task,m]),(0,Z.jsxs)(o.Z,{align:"middle",className:"".concat(e.className),children:[(0,Z.jsxs)(u.Z,{xs:24,children:[(0,Z.jsx)(o.Z,{children:(0,Z.jsx)("button",{className:"".concat(e.className,"--btn"),onClick:function(){return f(!0)},children:le.btnAdd})}),(0,Z.jsx)("span",{className:"".concat(e.className,"--title"),children:le.title}),(0,Z.jsx)(o.Z,{children:(0,Z.jsx)(u.Z,{xs:24,className:"".concat(e.className,"--list"),children:null===(n=e.task.subtask_order)||void 0===n?void 0:n.map((function(n,a){return(0,Z.jsxs)(o.Z,{align:"middle",justify:"space-between",className:"".concat(e.className,"--item"),children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)(e.icon,{})," ",(0,Z.jsx)("span",{children:n.name})]}),!n.complete&&(0,Z.jsxs)("div",{className:"".concat(e.className,"--icon"),children:[(0,Z.jsx)(le.iconCheck,{onClick:function(){return e.handleChangeSubtask(n,"complete")}}),(0,Z.jsx)(le.iconCancel,{onClick:function(){return e.handleChangeSubtask(n,"delete")}})]})]},"subtask-".concat(a))}))})})]}),(0,Z.jsx)(N.Z,{loading:!1,contentModal:t.temp,visible:m,closeModal:function(e){f(e)},title:t.title})]})},oe=E.Z.TextArea;var ue=function(e){var n=(0,h.useState)(e.task.name),a=(0,r.Z)(n,2),s=a[0],t=a[1];return(0,h.useEffect)((function(){t(e.task.name)}),[e.task]),(0,Z.jsxs)(o.Z,{justify:"center",className:"".concat(e.className),children:[e.label&&(0,Z.jsx)("label",{htmlFor:e.name,className:"".concat(e.className,"--label"),children:e.label}),(0,Z.jsx)(oe,{rows:4,name:e.task.name,className:"".concat(e.className,"--area"),defaultValue:e.task.name,value:s,onChange:function(e){return t(e.target.value)},onBlur:function(){return e.changeDescription(s,"description")},bordered:!1})]})},de=w.zA.task;var me=function(e){var n=(0,p.UO)(),a=(0,h.useState)(e.task),s=(0,r.Z)(a,2),l=s[0],d=s[1],m=function(){var e=(0,c.Z)(i().mark((function e(n,a){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getTasksDetail(n,a);case 3:s=e.sent,d(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,a){return e.apply(this,arguments)}}(),x=function(){var n=(0,c.Z)(i().mark((function n(a,s,t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.patchTasks(a,s,t);case 3:n.sent&&(e.changeTask(),m(a,s)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,s){return n.apply(this,arguments)}}(),j=function(){var n=(0,c.Z)(i().mark((function n(a,s,t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"complete"!==t){n.next=8;break}return n.next=4,v.Z.patchTasksComplete(a,s);case 4:n.sent,(0,S.I)("success","Task complete!",""),n.next=12;break;case 8:return n.next=10,v.Z.deleteTasks(a,s);case 10:n.sent,(0,S.I)("success","Delete Task successfully!","");case 12:e.changeTask(),m(a,l._id||""),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),console.log(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e,a,s){return n.apply(this,arguments)}}(),b=function(){var n=(0,c.Z)(i().mark((function n(a,s,t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.postSubtasks(a,s,t);case 3:n.sent&&(e.changeTask(),m(a,s),(0,S.I)("success","Create Subtask successfully!","")),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,s){return n.apply(this,arguments)}}(),k=function(){var n=(0,c.Z)(i().mark((function n(a,s,t){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v.Z.postAssigneeTasks(a,s,t);case 3:n.sent&&(e.changeTask(),m(a,s)),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,a,s){return n.apply(this,arguments)}}(),g=function(){var e=(0,c.Z)(i().mark((function e(n,a,s){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.deleteAssigneeTasks(n,a,s);case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n,a,s){return e.apply(this,arguments)}}(),N=function(a,s){var c=e.task._id||"";if(a){var r={};switch(s){case"name":r.name=a;break;case"assignee":if(a.length>0){var i,o=(0,t.Z)(l.assignee||[]);try{for(o.s();!(i=o.n()).done;){var u=i.value;g(n.id,c,u)}}catch(p){o.e(p)}finally{o.f()}var d,m=(0,t.Z)(a);try{for(m.s();!(d=m.n()).done;){var h=d.value;k(n.id,c,{member:h})}}catch(p){m.e(p)}finally{m.f()}}r.assignee=a;break;case"expires":r.expires=Number(f()(a).utc().format("x"))}x(n.id,c,r)}};return(0,h.useEffect)((function(){d(e.task)}),[e.task]),(0,Z.jsx)(o.Z,{children:(0,Z.jsxs)(u.Z,{xs:24,children:[(0,Z.jsx)(ae,{className:"".concat(de,"-header"),icon:e.icon,task:l,changeName:N}),(0,Z.jsx)(te,{className:"".concat(de,"-field"),task:l,label:"Assignee",changeAssignee:N}),(0,Z.jsx)(ee,{className:"".concat(de,"-field"),task:l,label:"Due date",name:"expires",changeExpires:N}),(0,Z.jsx)(ue,{className:"".concat(de,"-field"),task:l,label:"Description",name:"expires",changeDescription:function(e){return console.log(e)}}),(0,Z.jsx)(ie,{className:"".concat(de,"-subtask"),task:l,icon:e.icon,handleSubmit:function(a){var s=e.task._id||"";b(n.id,s,a)},handleChangeSubtask:function(e,a){j(n.id,e._id,a)}})]})})},fe=y.Pb.tasks;var he=function(e){return(0,Z.jsx)("div",{className:"".concat(e.className),children:(0,Z.jsx)(o.Z,{justify:"center",children:(0,Z.jsxs)(u.Z,{xs:24,children:[(0,Z.jsx)(o.Z,{className:"".concat(e.className,"--title"),children:(0,Z.jsx)("span",{children:e.title})}),(0,Z.jsx)(o.Z,{className:"".concat(e.className,"--tasks"),children:(0,Z.jsxs)(u.Z,{xs:24,children:[e.tasks.length>0&&e.tasks.map((function(n,a){if(n.status===e.filter)return(0,Z.jsx)(o.Z,{className:"".concat(e.className,"--task"),onClick:function(){return e.handleTask(n,e.icon)},children:(0,Z.jsxs)(u.Z,{xs:24,children:[(0,Z.jsxs)(o.Z,{justify:"space-between",align:"middle",children:[(0,Z.jsxs)(u.Z,{xs:20,className:"".concat(e.className,"--task-name"),children:[(0,Z.jsx)(e.icon,{})," ",(0,Z.jsx)("span",{children:n.name})]}),(0,Z.jsx)("span",{className:"".concat(e.className,"--task-icon"),children:(0,Z.jsx)(fe.iconMenuTask,{})})]}),(0,Z.jsx)(o.Z,{justify:"space-between",children:(0,Z.jsxs)("span",{className:"".concat(e.className,"--task-time"),children:[(0,Z.jsx)(fe.iconDeadline,{})," ",f()(n.expires).format("DD/MM/YYYY")]})})]})},"task-".concat(a))})),(0,Z.jsx)(o.Z,{className:"".concat(e.className,"--btn"),children:(0,Z.jsx)(u.Z,{xs:24,children:(0,Z.jsxs)(o.Z,{align:"middle",onClick:function(){return e.actionDropdown("add-task")},children:[(0,Z.jsx)("span",{className:"".concat(e.className,"--btn-icon"),children:(0,Z.jsx)(fe.iconBtnAdd,{})}),(0,Z.jsx)("span",{className:"".concat(e.className,"--btn-text"),children:fe.textBtnAdd})]})})})]})})]})})})},xe=y.Pb,pe=w.zA.project;var ve=function(e){var n=(0,p.UO)(),a=(0,x.I0)(),l=(0,h.useState)(!1),m=(0,r.Z)(l,2),b=m[0],y=m[1],D=(0,h.useState)(!1),T=(0,r.Z)(D,2),A=T[0],R=T[1],I=(0,h.useState)((0,Z.jsx)(Z.Fragment,{})),E=(0,r.Z)(I,2),P=E[0],z=E[1],U=(0,h.useState)((0,Z.jsx)(Z.Fragment,{})),F=(0,r.Z)(U,2),Y=F[0],O=F[1],V=(0,x.v9)((function(e){return e.projects})),B=(0,x.v9)((function(e){return e.project})),L=(0,h.useState)([]),q=(0,r.Z)(L,2),H=q[0],J=q[1],K=function(){var e=(0,c.Z)(i().mark((function e(n){var s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getProjectsDetail(n);case 3:s=e.sent,a((0,j.IH)(s)),G(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=(0,c.Z)(i().mark((function e(n){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.Z.getTasks(n);case 3:a=e.sent,J(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=(0,c.Z)(i().mark((function e(n,a){var s,c,r,l,o,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s={name:a.name},e.next=4,v.Z.postTasks(n,s);case 4:if(c=e.sent,r=c._id||"",!a.assignee||!c){e.next=26;break}l=(0,t.Z)(a.assignee),e.prev=8,l.s();case 10:if((o=l.n()).done){e.next=17;break}return u=o.value,e.next=14,v.Z.postAssigneeTasks(n,r,{member:u});case 14:e.sent;case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),l.e(e.t0);case 22:return e.prev=22,l.f(),e.finish(22);case 25:delete a.assignee;case 26:if(!a||!c){e.next=32;break}return a.expires=Number(f()(a.expires).utc().format("x")),e.next=30,v.Z.patchTasks(n,r,a);case 30:e.sent&&(y(!1),K(n),(0,S.I)("success","Create Task successfully!",""));case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),console.log(e.t1);case 37:case"end":return e.stop()}}),e,null,[[0,34],[8,19,22,25]])})));return function(n,a){return e.apply(this,arguments)}}(),X=function(e,n){var a=(0,Z.jsx)(Z.Fragment,{}),t="";switch(y(!0),e){case"add-task":a=(0,Z.jsx)(d.J9,{initialValues:_.pN,validationSchema:C.vP,onSubmit:function(a){return function(e,n,a){"add-task"===n&&W(B._id,(0,s.Z)((0,s.Z)({},e),{},{status:a}))}(a,e,n)},render:$}),t="Add Task";break;case"add-member":a=(0,Z.jsx)(M,{}),t="Members";break;case"add-roles":a=(0,Z.jsx)(Q,{}),t="Roles"}z({temp:a,title:t})},ee=function(e,a){R(!0),O((0,Z.jsx)(me,{task:e,icon:a,changeTask:function(){G(n.id)},memberProject:B.members}))};return(0,h.useEffect)((function(){V&&V.length>0?V.forEach((function(e){e._id===n.id&&(G(e._id),a((0,j.IH)(e)))})):K(n.id)}),[n]),(0,h.useEffect)((function(){b||z({temp:(0,Z.jsx)(Z.Fragment,{}),title:""})}),[b]),(0,Z.jsx)(o.Z,{className:"".concat(e.className," ").concat(pe),children:(0,Z.jsxs)(u.Z,{xs:24,children:[(0,Z.jsx)(g.Z,{className:w.KN.header,dropdown:B.name,actionDropdown:X}),(0,Z.jsx)("div",{className:"".concat(pe,"__list"),children:(0,Z.jsx)("div",{className:"".concat(pe,"__list--scroll"),children:xe.tasks.filter.map((function(e,n){return(0,Z.jsx)(he,{actionDropdown:function(n){return X(n,e.value)},className:"".concat(pe,"__list-tasks"),title:e.title,tasks:H,filter:e.value,icon:e.icon,handleTask:ee},"tasks-".concat(n))}))})}),(0,Z.jsx)(N.Z,{loading:!1,contentModal:P.temp,visible:b,closeModal:function(e){y(e)},title:P.title}),(0,Z.jsx)(k,{visible:A,closeModal:function(){return R(!1)},contentDrawer:Y})]})})}}}]);
//# sourceMappingURL=737.45b8e86a.chunk.js.map